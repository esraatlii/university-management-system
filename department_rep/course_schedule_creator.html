<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ders Programı Oluşturucu</title>
    <link rel="stylesheet" href="../css/style.css"> 
    <link rel="stylesheet" href="../css/course_schedule_creator.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Kart ve Grid Stilleri */
        .course-card { 
            padding: 10px; border: 1px solid #ddd; border-radius: 8px; margin-bottom: 10px; background: white; cursor: grab; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: all 0.2s;
        }
        .course-card:hover { transform: translateY(-2px); border-color: #2563EB; }
        .course-card h4 { margin: 0 0 5px 0; color: #2563EB; font-size: 0.95rem; }
        .course-card p { margin: 0; font-size: 0.8rem; color: #666; }
        
        .grid-cell { position: relative; height: 80px; border-right: 1px solid #eee; border-bottom: 1px solid #eee; vertical-align: top; padding: 2px; }
        .grid-cell:hover { background-color: #f9fafb; }
        .grid-cell.drag-over { background-color: #eff6ff; border: 2px dashed #2563EB; }

        .placed-card {
            background: #EFF6FF; border-left: 3px solid #2563EB; padding: 4px; font-size: 0.75rem;
            border-radius: 4px; height: 100%; display: flex; flex-direction: column; justify-content: space-between;
            position: relative; overflow: hidden;
        }
        .placed-card strong { display: block; color: #1e3a8a; }
        .remove-btn { position: absolute; top: 2px; right: 2px; color: #ef4444; cursor: pointer; font-weight: bold; background: none; border: none; }

        /* Modal Liste */
        .room-item {
            padding: 10px; border: 1px solid #eee; border-radius: 6px; margin-bottom: 8px; cursor: pointer;
            display: flex; justify-content: space-between; align-items: center;
        }
        .room-item:hover { background-color: #f0f9ff; border-color: #bae6fd; }
        .tag { padding: 4px 8px; border-radius: 12px; font-size: 0.7rem; font-weight: bold; }
        .tag-green { background: #dcfce7; color: #166534; }
        .tag-red { background: #fee2e2; color: #991b1b; }
        .tag-orange { background: #ffedd5; color: #9a3412; }
        .room-item.disabled { opacity: 0.6; pointer-events: none; background: #f3f4f6; }
    </style>
</head>
<body>

    <header class="main-header">
        <div class="header-left">
            <a href="rep_dashboard.html" class="back-link">← Geri Dön</a>
            <span class="header-title">Ders Programı Oluşturucu</span>
        </div>
        <div class="header-right">
            <div class="user-avatar" id="userAvatar">U</div>
        </div>
    </header>

    <div class="builder-container">
        
        <aside class="sidebar-left">
            <button onclick="generateAutoScheduleFrontend()" style="width:100%; margin-bottom: 20px; background-color: #7c3aed; color: white; border: none; padding: 12px; border-radius: 6px; cursor: pointer; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 8px; box-shadow: 0 4px 6px rgba(124, 58, 237, 0.2); transition: all 0.2s;">
                <i class="fa-solid fa-wand-magic-sparkles"></i> Otomatik Dağıt
            </button>

            <h3>Planlanacak Dersler</h3>
            <div class="course-list" id="courseListContainer">
                <p style="color:#999; font-size:0.9rem; text-align:center; margin-top:20px;">Yükleniyor...</p>
            </div>
        </aside>

        <main class="schedule-main">
            <div class="schedule-grid">
                <div class="grid-head-cell">Saat</div>
                <div class="grid-head-cell">Pazartesi</div>
                <div class="grid-head-cell">Salı</div>
                <div class="grid-head-cell">Çarşamba</div>
                <div class="grid-head-cell">Perşembe</div>
                <div class="grid-head-cell">Cuma</div>

                <div class="time-slot">08:30</div>
                <div class="grid-cell" data-day="Mon" data-time="08:30"></div>
                <div class="grid-cell" data-day="Tue" data-time="08:30"></div>
                <div class="grid-cell" data-day="Wed" data-time="08:30"></div>
                <div class="grid-cell" data-day="Thu" data-time="08:30"></div>
                <div class="grid-cell" data-day="Fri" data-time="08:30"></div>

                <div class="time-slot">09:30</div>
                <div class="grid-cell" data-day="Mon" data-time="09:30"></div>
                <div class="grid-cell" data-day="Tue" data-time="09:30"></div>
                <div class="grid-cell" data-day="Wed" data-time="09:30"></div>
                <div class="grid-cell" data-day="Thu" data-time="09:30"></div>
                <div class="grid-cell" data-day="Fri" data-time="09:30"></div>

                <div class="time-slot">10:30</div>
                <div class="grid-cell" data-day="Mon" data-time="10:30"></div>
                <div class="grid-cell" data-day="Tue" data-time="10:30"></div>
                <div class="grid-cell" data-day="Wed" data-time="10:30"></div>
                <div class="grid-cell" data-day="Thu" data-time="10:30"></div>
                <div class="grid-cell" data-day="Fri" data-time="10:30"></div>

                <div class="time-slot">11:30</div>
                <div class="grid-cell" data-day="Mon" data-time="11:30"></div>
                <div class="grid-cell" data-day="Tue" data-time="11:30"></div>
                <div class="grid-cell" data-day="Wed" data-time="11:30"></div>
                <div class="grid-cell" data-day="Thu" data-time="11:30"></div>
                <div class="grid-cell" data-day="Fri" data-time="11:30"></div>

                <div class="time-slot">12:30</div>
                <div class="grid-cell" data-day="Mon" data-time="12:30"></div>
                <div class="grid-cell" data-day="Tue" data-time="12:30"></div>
                <div class="grid-cell" data-day="Wed" data-time="12:30"></div>
                <div class="grid-cell" data-day="Thu" data-time="12:30"></div>
                <div class="grid-cell" data-day="Fri" data-time="12:30"></div>

                <div class="time-slot">13:30</div>
                <div class="grid-cell" data-day="Mon" data-time="13:30"></div>
                <div class="grid-cell" data-day="Tue" data-time="13:30"></div>
                <div class="grid-cell" data-day="Wed" data-time="13:30"></div>
                <div class="grid-cell" data-day="Thu" data-time="13:30"></div>
                <div class="grid-cell" data-day="Fri" data-time="13:30"></div>

                <div class="time-slot">14:30</div>
                <div class="grid-cell" data-day="Mon" data-time="14:30"></div>
                <div class="grid-cell" data-day="Tue" data-time="14:30"></div>
                <div class="grid-cell" data-day="Wed" data-time="14:30"></div>
                <div class="grid-cell" data-day="Thu" data-time="14:30"></div>
                <div class="grid-cell" data-day="Fri" data-time="14:30"></div>

                <div class="time-slot">15:30</div>
                <div class="grid-cell" data-day="Mon" data-time="15:30"></div>
                <div class="grid-cell" data-day="Tue" data-time="15:30"></div>
                <div class="grid-cell" data-day="Wed" data-time="15:30"></div>
                <div class="grid-cell" data-day="Thu" data-time="15:30"></div>
                <div class="grid-cell" data-day="Fri" data-time="15:30"></div>
                
                <div class="time-slot">16:30</div>
                <div class="grid-cell" data-day="Mon" data-time="16:30"></div>
                <div class="grid-cell" data-day="Tue" data-time="16:30"></div>
                <div class="grid-cell" data-day="Wed" data-time="16:30"></div>
                <div class="grid-cell" data-day="Thu" data-time="16:30"></div>
                <div class="grid-cell" data-day="Fri" data-time="16:30"></div>
            </div>
        </main>

        <aside class="sidebar-right">
            <h3>Uyarılar</h3>
            <div id="issues-container" style="margin-top:10px;">
                <p style="color:#999; font-size:0.8rem;">İşlem bekleniyor...</p>
            </div>
        </aside>

    </div>

    <div class="modal-overlay" id="roomModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Sınıf Seçimi</h3>
                <span class="close-btn" onclick="closeModal()">×</span>
            </div>
            <div class="modal-body">
                <div id="instructorWarning" style="display:none; background-color: #fee2e2; color: #991b1b; padding: 10px; border-radius: 6px; margin-bottom: 15px; font-size: 0.9rem; border: 1px solid #f87171;">
                    <i class="fa-solid fa-triangle-exclamation"></i> 
                    <b>UYARI:</b> Hoca bu saatte müsait değil!
                </div>

                <div id="modalCourseInfo" style="margin-bottom:15px; padding-bottom:10px; border-bottom:1px solid #eee;"></div>

                <h4>Müsait Sınıflar:</h4>
                <ul id="roomList" class="room-list"></ul>
            </div>
        </div>
    </div>

    <script src="../js/course_schedule_creator.js"></script>
</body>
</html>